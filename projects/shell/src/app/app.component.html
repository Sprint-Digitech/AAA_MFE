<div class="shell-wrapper" [ngClass]="{'no-shell': isLoginPage, 'sidebar-collapsed': isSidebarCollapsed}">
  <!-- Sidebar -->
  <aside class="sidebar" *ngIf="!isLoginPage">
    <div class="sidebar-header">
      <div class="logo-group">
        <img src="assets/img/fovesta1.png" alt="Logo" class="sidebar-logo">
        <span class="divider"></span>
        <span class="brand-text">HRMS</span>
      </div>
      <button class="toggle-btn" (click)="toggleSidebar()">
        <mat-icon>menu</mat-icon>
      </button>
    </div>

    <nav class="sidebar-nav">
      <ul>
        <!-- Static Demo Items based on screenshot -->
        <li><a routerLink="/master" [class.active]="isRouteActive('/master')"><mat-icon>grid_view</mat-icon>
            <span>Master</span></a>
        </li>
        <li><a routerLink="/settings" [class.active]="isRouteActive('/settings')"><mat-icon>settings</mat-icon>
            <span>Settings</span></a>
        </li>
        <li><a routerLink="/employee/employeesList"
            [class.active]="isRouteActive('/employee')"><mat-icon>badge</mat-icon>
            <span>Employee</span></a>
        </li>
        <li><a routerLink="/alms" [class.active]="isRouteActive('/alms')"><mat-icon>calendar_today</mat-icon>
            <span>ALMS</span></a>
        </li>
        <li><a routerLink="/salary/salaryreport"
            [class.active]="isRouteActive('/salary')"><mat-icon>currency_rupee</mat-icon>
            <span>Salary</span></a></li>
        <li><a routerLink="/loan" [class.active]="isRouteActive('/loan')"><mat-icon>account_balance_wallet</mat-icon>
            <span>Loan</span></a></li>
        <li><a routerLink="/reports" [class.active]="isRouteActive('/reports')"><mat-icon>assessment</mat-icon>
            <span>Reports</span></a>
        </li>
        <li><a routerLink="/bonus" [class.active]="isRouteActive('/bonus')"><mat-icon>emoji_events</mat-icon>
            <span>Bonus</span></a>
        </li>
        <li><a routerLink="/reimbursement"
            [class.active]="isRouteActive('/reimbursement')"><mat-icon>payments</mat-icon>
            <span>Reimbursement</span></a></li>
        <li><a routerLink="/ess" [class.active]="isRouteActive('/ess')"><mat-icon>info</mat-icon> <span>ESS
              Portal</span></a></li>
        <li><a routerLink="/access" [class.active]="isRouteActive('/access')"><mat-icon>vpn_key</mat-icon> <span>Access
              Rights</span></a></li>
        <li><a routerLink="/gratuity" [class.active]="isRouteActive('/gratuity')"><mat-icon>account_balance</mat-icon>
            <span>Gratuity</span></a></li>
        <li><a routerLink="/arrear" [class.active]="isRouteActive('/arrear')"><mat-icon>history</mat-icon>
            <span>Arrear</span></a></li>


        <!-- Dynamic Items if any (filtered) -->
        <ng-container *ngFor="let menu of menus">
          <li *ngIf="!['Master', 'Settings', 'Employee', 'ALMS', 'Salary'].includes(menu.menuDisplayName)">
            <a [routerLink]="menu.menuPath" routerLinkActive="active">
              <mat-icon>list</mat-icon> <span>{{ menu.menuDisplayName }}</span>
            </a>
          </li>
        </ng-container>
      </ul>
    </nav>

    <div class="sidebar-footer">
      <p>Copyright Â© 2024</p>
      <p>Outsmart Technology</p>
    </div>
  </aside>

  <!-- Main Content Box -->
  <div class="main-container">
    <!-- Header -->
    <header class="header" *ngIf="!isLoginPage">
      <div class="header-left">
        <div class="search-box">
          <mat-icon>search</mat-icon>
          <input type="text" placeholder="Search">
        </div>
      </div>

      <div class="header-right">
        <div class="company-badge" *ngIf="user">
          <img src="assets/img/fovesta1.png" alt="Company" class="company-logo">
          <span class="company-name">{{ user.companyName || 'Core Tech Pvt Ltd' }}</span>
        </div>
        <div class="user-profile">
          <div class="avatar">{{ user?.firstName?.charAt(0) || 'N' }}{{ user?.lastName?.charAt(0) || 'P' }}</div>
        </div>
      </div>
    </header>

    <!-- Content Area -->
    <main class="content-area" [ngClass]="{'full-page': isLoginPage}">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>
