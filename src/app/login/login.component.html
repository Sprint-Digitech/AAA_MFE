<div class="main" [style.background-image]="backgroundImage" [style.background-repeat]="'repeat'"
  [style.background-size]="'auto'">
  <div class="login-wrapper">
    <div class="left-section">
      <div class="logo-box">
        <img src="/assets/img/fovesta1.png" alt="Fovesta Icon" class="logo-img" />
        <span class="divider-line"></span>
        <span class="label">HRMS</span>
      </div>

      <div class="text-section">
        <h1>Payroll / HR Software</h1>
        <p>
          Streamline your workforce management with our <br>
          comprehensive payroll and HR solutions. Simplify <br>
          employee management, automate payroll <br>
          processing, and enhance productivity.
        </p>
        <div class="image-wrapper">
          <img src="/assets/img/login.png" alt="login illustration" class="illustration-img">
        </div>
      </div>

      <div class="footer">
        <span> Copyright Â© 2025 Outsmart Technology</span>
        <div class="footer-divider"></div>
        <span>Marketed by: Sprint Digitech</span>
      </div>
    </div>

    <div class="right-section">
      <mat-card class="login-card">
        <mat-card-content>
          <div class="login-header">
            <h1>Login</h1>
          </div>

          <form [formGroup]="loginForm" (ngSubmit)="submit()">
            <div class="form-group">
              <label for="email">User ID</label>
              <mat-form-field class="user-id-field" appearance="outline">
                <input matInput formControlName="email" type="email" placeholder="Username / Email" required />
              </mat-form-field>
              <mat-error *ngIf="loginForm.get('email')?.hasError('email') && 
                   loginForm.get('email')?.touched && 
                   !loginForm.get('email')?.hasError('required')">
                Email must be a valid email
              </mat-error>
              <lib-required-nemo [control]="loginForm.get('email')" label="Email"></lib-required-nemo>
            </div>

            <div class="form-group">
              <label for="password">Password</label>
              <mat-form-field class="password-field" appearance="outline">
                <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password"
                  placeholder="Password" required />
                <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" type="button"
                  aria-label="Toggle password visibility">
                  <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                </button>
              </mat-form-field>

              <lib-required-nemo [control]="loginForm.get('password')" label="Password"></lib-required-nemo>
              <lib-password-nemo [control]="loginForm.get('password')" label="Password"></lib-password-nemo>
            </div>

            <div class="form-options">
              <mat-checkbox formControlName="rememberMe">Remember me</mat-checkbox>
              <a routerLink="/forgot-password">Forgot Password?</a>
            </div>

            <button mat-raised-button class="login-button" type="submit" [disabled]="loading" style="background-color: #006AFF; color:#FFFFFF; font-family: Poppins;">
              {{ loading ? 'Logging in...' : 'Login' }}
            </button>

            <p class="create-account">
              <span class="or-text">or </span>
              <a routerLink="/register">Create an account</a>
            </p>

            <div *ngIf="error" class="alert alert-danger mt-3 mb-0">
              {{ error }}
            </div>
          </form>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>